<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>All Parcels</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
</head>

<body>
    <h2 th:text = "${title}"></h2>
    <nav>
        <ul>
            <li><a th:href="@{/driver/show/all}">Show All Drivers</a></li>
            <li><a th:href="@{/parcel/show/all}">Show All Parcells</a></li>
            <li><a th:href="@{/customer/create/person}">Create Customer as Person</a></li>
            <li><a th:href="@{/customer/create/company}">Create Customer as Company</a></li>
            <form th:action="@{'/customer/add/address'}" method="get">
                <td>
                    <select id="customerId" name="customerId">
                        <label>Select Customer:</label>
                        <option th:each="customerId : ${customerId}" th:value="${customerId}" th:text="${customerId}"></option>
                    </select>
                </td>
                <input type="submit" value="add address for this customer">
            </form>

            <form th:action="@{'/parcel/show/customer'}" method="GET">
                <input name="id" placeholder="Search by Customer id">
                <button type="submit">Search</button>
            </form>
            <form th:action="@{'/parcel/show/driver'}" method="GET">
                <input name="id" placeholder="Search by driver id">
                <button type="submit">Search</button>
            </form>

            <form th:action="@{'/parcel/show/price'}" method="GET">
                <input type="number" name="price" min="0" max="100" step="0.2" value="0.01">
                <button type="submit">Search</button>
            </form>

            <form action="/parcel/show/city" method="get">
                <label>Select City:</label>
                <select id="idc" name="city">
                    <option th:value="${currCity}"
                            th:text="${currCity}+' (Current)'"></option>
                    <option th:each="city : ${T(lv.venta.model.City).values()}" th:value="${city}" th:text="${city}"></option>
                </select>
                <button type="submit">Show Parcels</button>
            </form>
            <form action="/parcel/calculate/income" method="get">
                <label>Select Customer:</label>
                    <select name="customerId">
                        <option th:each="customerId : ${customerId}"
                                th:value="${customerId}"
                                th:text="${customerId}"></option>
                    </select>
                <button type="submit">Calculate income by id</button>
            </form>
            <li><a th:href="@{/parcel/calculate/count/today}">Show All Parcels that need to be delivered TODAY</a></li>
        </ul>
    </nav>
    <h2 th:text = "${title}"></h2>
    <table>
        <tr>
            <td>IDPA</td>
            <td>IDC</td>
            <td>DRIVER_ID</td>
            <td>ISFRAGILE</td>
            <td>PRICE eur</td>
            <td>SIZE</td>
            <td>Created at</td>
            <td>Planned Delivery</td>
            <td>Assigned Driver</td>
        </tr>
        <tr th:each="tempPr: ${myobjs}">
            <td th:text = "${tempPr.getIdpa()}"></td>
            <td th:text = "${tempPr.getAbstractCustomer().getIdc}"></td>
            <td th:text = "${tempPr.getDriver().getIdp()}"></td>
            <td th:text = "${tempPr.getIsFragile()}"></td>
            <td th:text = "${tempPr.getPrice()}"></td>
            <td th:text = "${tempPr.getSize()}"></td>
            <td th:text = "${tempPr.getOrderCreated()}"></td>
            <td th:text = "${tempPr.getPlannedDelivery}"></td>
            <td>
                <form th:action="@{'/parcel/change/' + ${tempPr.getIdpa()}}" method="get">
                        <select id="driver" name="driverId">
                            <option th:value="${tempPr.getDriver().getIdp()}"
                                    th:text="${tempPr.getDriver().getName()}+' (EsoÅ¡ais)'"></option>
                            <option th:each="driver : ${driver}"
                                    th:value="${driver.getIdp()}"
                                    th:text="${driver.getName()}"></option>
                        </select>
                        <input type="submit" value="Change Driver">
                </form>
            </td>
        </tr>
    </table>
    <form th:action="@{'/parcel/add'}" method="get">
        <table style="width: 40%; ">
            <h2>Insert Parcell for customer and driver</h2>
            <tr>
                <td>Insert CustommerCode:</td>
                <td>Insert DriverId:</td>
            </tr>
            <tr>
                <td>
                    <select id="customerCode" name="customerCode">
                        <label>Select Customer:</label>
                        <option th:each="customer : ${customer}" th:value="${customer}" th:text="${customer}"></option>
                    </select>
                </td>
                <td>
                    <select id="driver1" name="driverId">
                        <option th:each="driver : ${driver}" th:value="${driver.getIdp()}" th:text="${driver.getIdp()}"></option>
                    </select>
                </td>
            </tr>
        </table>
        <input type="submit" value="Insert Parcel">
    </form>
</body>
</html>